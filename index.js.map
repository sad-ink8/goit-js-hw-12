{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst loadBtn = document.querySelector('.load-btn');\n\nexport async function getImg(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '49069993-51884dcb47f371bf5faecc40d',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n\n// .then(response => {\n//       return response.data;\n//     })\n//     .catch(error => {\n//       console.error('Error:', error);\n//     });\n","import SimpleLightbox from 'simplelightbox'; // Описаний у документації\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Додатковий імпорт стилів\nimport iziToast from 'izitoast'; // Описаний у документації\nimport 'izitoast/dist/css/iziToast.min.css'; // Додатковий імпорт стилів\n\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\n\nexport let totalHits = 0;\n\nconst renderImages = data => {\n  const { hits } = data;\n  totalHits = data.totalHits;\n\n  if (hits.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: 'white',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n\n    loadBtn.style.display = 'none';\n  }\n\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\"><div class=\"box\">\n                <a href=\"${largeImageURL}\" target=\"_blank\">\n                    <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"description\">\n                    <div><p>Likes</p><span> ${likes}</span></div>\n                    <div><p>Views</p><span> ${views}</span></div>\n                    <div><p>Comments</p><span> ${comments}</span></div>\n                    <div><p>Downloads</p><span> ${downloads}</span></div>\n                </div>\n            </div></li>`\n    )\n    .join('');\n};\n\nexport const showGallery = data => {\n  const markup = renderImages(data);\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nconst lightbox = new SimpleLightbox('.gallery a');\nexport const lightBoxGallery = () => {\n  lightbox.refresh();\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImg } from './js/pixabay-api.js';\nimport {\n  showGallery,\n  lightBoxGallery,\n  totalHits,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nloadBtn.style.display = 'none';\n\nlet search = '';\nlet page = 1;\n\nfunction main() {\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const formData = new FormData(event.target);\n    search = formData.get('search');\n\n    if (!search) {\n      iziToast.error({\n        message: 'Input is empty!',\n        messageColor: 'white',\n        position: 'topRight',\n        backgroundColor: 'red',\n      });\n      return;\n    }\n\n    loadBtn.insertAdjacentHTML('afterend', \"<span class='loader'></span>\");\n    form.reset();\n\n    try {\n      const firstImg = await getImg(search, page);\n      gallery.innerHTML = '';\n      showGallery(firstImg);\n      lightBoxGallery();\n      loadPages();\n    } catch (error) {\n      console.error('Error:', error);\n      gallery.innerHTML = '';\n    }\n  });\n\n  loadBtn.addEventListener('click', async () => {\n    try {\n      page += 1;\n      const addImages = await getImg(search, page);\n      showGallery(addImages);\n      lightBoxGallery();\n      loadPages();\n      scrollPage();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  });\n}\n\nfunction loadPages() {\n  const totalPages = document.querySelectorAll('.box').length;\n\n  if (totalPages >= totalHits) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: 'white',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n  } else {\n    loadBtn.style.display = 'block';\n  }\n}\n\nfunction scrollPage() {\n  const imgBox = document.querySelector('.box');\n\n  if (imgBox) {\n    const boxH = imgBox.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: boxH * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nmain();\n"],"names":["getImg","query","page","axios","error","gallery","loadBtn","totalHits","renderImages","data","hits","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showGallery","markup","lightbox","SimpleLightbox","lightBoxGallery","form","search","main","event","firstImg","loadPages","addImages","scrollPage","imgBox","boxH"],"mappings":"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"}