{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst loadBtn = document.getElementById('loadbtn');\n\nexport async function getImg(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '49069993-51884dcb47f371bf5faecc40d',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n    loadBtn.style.display = 'block';\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n\n// .then(response => {\n//       return response.data;\n//     })\n//     .catch(error => {\n//       console.error('Error:', error);\n//     });\n","import SimpleLightbox from 'simplelightbox'; // Описаний у документації\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Додатковий імпорт стилів\nimport iziToast from 'izitoast'; // Описаний у документації\nimport 'izitoast/dist/css/iziToast.min.css'; // Додатковий імпорт стилів\n\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.getElementById('loadbtn');\n\nexport let totalHits = 0;\n\nconst renderImages = data => {\n  const { hits } = data;\n  totalHits = data.totalHits;\n\n  if (hits.length === 0) {\n    console.log(\"No more images found. Removing loader.\");\n    removeLoader();\n    loadBtn.style.display = 'none';\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: 'white',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n  }\n\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\"><div class=\"box\">\n                <a href=\"${largeImageURL}\" target=\"_blank\">\n                    <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"description\">\n                    <div><p>Likes</p><span> ${likes}</span></div>\n                    <div><p>Views</p><span> ${views}</span></div>\n                    <div><p>Comments</p><span> ${comments}</span></div>\n                    <div><p>Downloads</p><span> ${downloads}</span></div>\n                </div>\n            </div></li>`\n    )\n    .join('');\n};\n\nexport const showGallery = data => {\n  const markup = renderImages(data);\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nconst lightbox = new SimpleLightbox('.gallery a');\nexport const lightBoxGallery = () => {\n  lightbox.refresh();\n};\n\nfunction removeLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImg } from './js/pixabay-api.js';\nimport {\n  showGallery,\n  lightBoxGallery,\n  totalHits,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.getElementById('loadbtn');\nloadBtn.style.display = 'none';\n\nlet search = '';\nlet page = 1;\n\nfunction main() {\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    removeLoader();\n    loadBtn.insertAdjacentHTML('beforebegin', \"<span class='loader'></span>\");\n\n    const formData = new FormData(event.target);\n    search = formData.get('search');\n\n    if (!search) {\n      iziToast.error({\n        message: 'Input is empty!',\n        messageColor: 'white',\n        position: 'topRight',\n        backgroundColor: 'red',\n      });\n      removeLoader();\n      return;\n    }\n\n    form.reset();\n    page = 1;\n\n    try {\n      const firstImg = await getImg(search, page);\n      gallery.innerHTML = '';\n      showGallery(firstImg);\n      lightBoxGallery();\n      loadPages();\n    } catch (error) {\n      console.error('Error:', error);\n      gallery.innerHTML = '';\n    }\n  });\n\n  loadBtn.addEventListener('click', async () => {\n    page += 1;\n    try {\n      const addImages = await getImg(search, page);\n      showGallery(addImages);\n      lightBoxGallery();\n      loadPages();\n      scrollPage();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  });\n}\n\nfunction scrollPage() {\n  const imgBox = document.querySelector('.box');\n\n  if (imgBox) {\n    const boxH = imgBox.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: boxH * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nfunction loadPages() {\n  const totalPages = document.querySelectorAll('.box').length;\n\n  if (totalPages >= totalHits) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: 'white',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n    loadBtn.style.display = 'none';\n  } else {\n    loadBtn.style.display = 'block';\n  }\n}\n\nfunction removeLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nmain();\n"],"names":["loadBtn","getImg","query","page","response","axios","error","gallery","totalHits","renderImages","data","hits","removeLoader","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showGallery","markup","lightbox","SimpleLightbox","lightBoxGallery","loader","form","search","main","event","firstImg","loadPages","addImages","scrollPage","imgBox","boxH"],"mappings":"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"}